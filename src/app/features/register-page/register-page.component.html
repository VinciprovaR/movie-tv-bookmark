<!-- <lib-register
  (doRegister)="handleRegister($event)"
  [isLoading]="selectIsLoading$ | async"
  [authErrors]="authSelectError$ | async"
  [loginLink]="'/login'"
></lib-register> -->
<app-form-error [errors]="authSelectError$ | async"></app-form-error>
<form
  nz-form
  [formGroup]="registerForm"
  class="register-form"
  (ngSubmit)="submitForm()"
>
  <fieldset [disabled]="selectIsLoading$ | async">
    <nz-form-item>
      <nz-form-control [nzErrorTip]="'Please input your username!'">
        <nz-input-group nzPrefixIcon="user">
          <input
            type="text"
            nz-input
            formControlName="username"
            placeholder="Username"
          />
          <!-- <ng-template #usernameErrorTps let-control>
            @if (control.errors?.['required']) { Please input your username! }
          </ng-template> -->
        </nz-input-group>
      </nz-form-control>
    </nz-form-item>

    <nz-form-item>
      <nz-form-control [nzErrorTip]="emailErrorTpl">
        <nz-input-group nzPrefixIcon="mail">
          <input
            type="text"
            nz-input
            formControlName="email"
            placeholder="Email"
          />
          <ng-template #emailErrorTpl let-control>
            @if (control.errors?.['email']) { The input is not valid E-mail! }
            @if (control.errors?.['required']) { Please input your E-mail! }
          </ng-template>
        </nz-input-group>
      </nz-form-control>
    </nz-form-item>

    <nz-form-item>
      <nz-form-control [nzErrorTip]="pswErrorTpl">
        <nz-input-group nzPrefixIcon="lock">
          <input
            type="password"
            nz-input
            formControlName="password"
            placeholder="Password"
          />
          <!-- <span nz-icon nzType="info-circle" nzTheme="fill"></span> -->
          <ng-template #pswErrorTpl let-control>
            @if (control.errors?.['pswError'] || control.errors?.['pattern']) {
            Password must contains no spaces, at least one letter and one
            number, between 6 and 24 characters } @if
            (control.errors?.['required']) { Please input your Password! }
          </ng-template>
        </nz-input-group>
      </nz-form-control>
    </nz-form-item>
    <nz-form-item>
      <nz-form-control [nzErrorTip]="pswConfErrorTpl">
        <nz-input-group nzPrefixIcon="lock">
          <input
            type="password"
            nz-input
            formControlName="confirmPassword"
            placeholder="Confirm Password"
          />
          <ng-template #pswConfErrorTpl let-control>
            @if (control.errors?.['diffPswErr']) { Passwords do not match } @if
            (control.errors?.['required']) { Please confirm your Password! }
          </ng-template>
        </nz-input-group>
      </nz-form-control>
    </nz-form-item>

    <button
      [disabled]="!registerForm.valid"
      nz-button
      class="register-form-button register-form-margin"
      nzType="primary"
      [nzLoading]="selectIsLoading$ | async"
    >
      Register
    </button>
  </fieldset>
</form>
<div>
  Or
  <a [routerLink]="'/login'"> login now!</a>
</div>
