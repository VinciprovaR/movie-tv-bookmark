<div class="flex flex-col items-center auth-wrapper pt-[60px]">
  <div class="w-[95%] max-w-sm pt-8">
    <div class="flex-none">
      <div class="bg-[var(--theme-color-3)] p-6 rounded-lg shadow-lg">
        <h2 class="text-2xl font-semibold text-center mb-6">Register</h2>
        <div
          class="flex-1 mb-4 transition-all duration-250 transform"
          #errorContainer
        >
          @if(submitted && !isFormValid){
          <div class="bg-[rgb(253,168,168)] text-sm p-3 rounded-md">
            <div class="flex space-x-2">
              <div>
                <mat-icon
                  class="text-[rgb(186,70,57)]"
                  aria-hidden="false"
                  aria-label=""
                  fontIcon="error"
                ></mat-icon>
              </div>
              <ul class="list-none p-0 m-0 text-[var(--text-color-dark)]">
                <!--  -->
                @if( registerForm.get('email')?.errors ){
                <!--  -->
                @if(registerForm.get('email')?.hasError('required') ){
                <li><mat-error>Please enter your email</mat-error></li>
                }
                <!--  -->
                @if(registerForm.get('email')?.hasError('email')){
                <li><mat-error>Invalid email address</mat-error></li>
                } }
                <!--  -->
                @if(passwordGroup.controls.password.errors ){
                <!--  -->

                @if(passwordGroup.controls.password.hasError('required')){
                <li><mat-error>Please create a password</mat-error></li>
                }
                <!--  -->
                @if(passwordGroup.controls.password.hasError('pattern') ||
                passwordGroup.controls.password.hasError('pswLength')){
                <li>
                  <mat-error>
                    Password must contains no spaces, at least one letter and
                    one number, between 6 and 24 characters</mat-error
                  >
                </li>
                } }
                <!--  -->
                @if(passwordGroup.controls.password.hasError('required')){

                <li>
                  <mat-error>Password confirmation is required</mat-error>
                </li>
                } @if (passwordGroup.hasError('diffPsw') ) {
                <li><mat-error>Passwords do not match</mat-error></li>
                }
              </ul>
            </div>
          </div>
          }
        </div>
        <form
          (ngSubmit)="onSubmit()"
          [formGroup]="registerForm"
          class="space-y-4"
        >
          <div>
            <label class="block text-sm font-medium" for="email">Email</label>
            <div class="relative">
              <input
                [ngClass]="{
                  'outline-[var(--theme-color-2)] border-0 focus:outline outline-[3px]':
                    !isEmailError,
                  'border-1 border-red-600 focus:outline-0 ': isEmailError
                }"
                autocomplete="username"
                type="email"
                id="email"
                formControlName="email"
                class="pl-12 mt-1 block w-full box-border px-3 py-2 rounded-md placeholder-gray-400 sm:text-sm"
              />
              <div
                class="absolute inset-y-0 left-0 flex items-center pl-3 pointer-events-none"
              >
                <mat-icon
                  class="text-[var(--icon-color)]"
                  aria-hidden="false"
                  aria-label=""
                  fontIcon="contact_mail"
                ></mat-icon>
              </div>
            </div>
          </div>
          <div class="space-y-4" [formGroup]="passwordGroup">
            <div>
              <label class="block text-sm font-medium" for="password"
                >Password</label
              >
              <div class="relative">
                <input
                  [ngClass]="{
                    'outline-[var(--theme-color-2)] border-0 focus:outline outline-[3px]':
                      !isPasswordError,
                    'border-1 border-red-600 focus:outline-0 ': isPasswordError
                  }"
                  autocomplete="new-password"
                  type="password"
                  id="password"
                  formControlName="password"
                  class="pl-12 mt-1 block w-full box-border px-3 py-2 rounded-md placeholder-gray-400 sm:text-sm"
                />
                <div
                  class="absolute inset-y-0 left-0 flex items-center pl-3 pointer-events-none"
                >
                  <mat-icon
                    class="text-[var(--icon-color)]"
                    aria-hidden="false"
                    aria-label=""
                    fontIcon="lock"
                  ></mat-icon>
                </div>
              </div>
            </div>
            <div>
              <label class="block text-sm font-medium" for="confirmPassword"
                >Confirm your password</label
              >
              <div class="relative">
                <input
                  [ngClass]="{
                    'outline-[var(--theme-color-2)] border-0 focus:outline outline-[3px]':
                      !isConfirmPasswordError,
                    'border-1 border-red-600 focus:outline-0 ':
                      isConfirmPasswordError
                  }"
                  autocomplete="new-password"
                  type="password"
                  id="confirmPassword"
                  formControlName="confirmPassword"
                  class="pl-12 mt-1 block w-full box-border px-3 py-2 rounded-md placeholder-gray-400 sm:text-sm"
                />
                <div
                  class="absolute inset-y-0 left-0 flex items-center pl-3 pointer-events-none"
                >
                  <mat-icon
                    class="text-[var(--icon-color)]"
                    aria-hidden="false"
                    aria-label=""
                    fontIcon="lock"
                  ></mat-icon>
                </div>
              </div>
            </div>
          </div>

          <button class="button-mt button-mt-role-normal" type="submit">
            Sign up
          </button>
          <div class="border-separator"></div>
          <div class="flex items-center justify-between">
            <div class="text-sm">
              <span> Already have an account? </span>
              <a [routerLink]="'/login'" class="font-medium">Sign in</a>
            </div>
          </div>
        </form>
      </div>
    </div>
  </div>
</div>
