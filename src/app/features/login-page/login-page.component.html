<div class="flex flex-col items-center auth-wrapper">
  @if(selectIsRequestResetPassword$ | async; as selectIsRequestResetPassword){
  <div class="w-[95%] max-w-sm pt-8">
    <div class="flex-none">
      <div class="bg-[var(--bg-success-container)] text-sm p-3 rounded-md">
        <div class="flex space-x-2">
          <div>
            <mat-icon
              class="text-[var(--success-icon-color)]"
              aria-hidden="false"
              aria-label=""
              fontIcon="check_circle"
            ></mat-icon>
          </div>
          <ul class="list-none p-0 m-0 text-[var(--text-color-dark)]">
            <li>
              We've sent you an email with instructions to reset your password,
              if the account exist. Please check your inbox, and don't forget to
              check your spam or junk folder if you don't see the email within a
              few minutes!
            </li>
          </ul>
        </div>
      </div>
    </div>
  </div>
  }
  <div class="w-[95%] max-w-sm pt-8">
    <div class="flex-none">
      <div class="bg-[var(--theme-color-3)] p-6 rounded-lg shadow-lg">
        <h2 class="text-2xl font-semibold text-center mb-6">Login</h2>
        <div
          class="flex-1 mb-4 transition-all duration-250 transform"
          #errorContainer
        >
          @if(submitted && !isFormValid){
          <div class="bg-[var(--bg-failure-container)] text-sm p-3 rounded-md">
            <div class="flex space-x-2">
              <div>
                <mat-icon
                  class="text-[var(--failure-icon-color)]"
                  aria-hidden="false"
                  aria-label=""
                  fontIcon="error"
                ></mat-icon>
              </div>
              <ul class="list-none p-0 m-0 text-[var(--text-color-dark)]">
                @if(loginForm.get('email')?.errors){
                @if(loginForm.get('email')?.hasError('required') ){
                <li><mat-error>Please enter your email</mat-error></li>
                } @if(loginForm.get('email')?.hasError('email')){
                <li><mat-error>Invalid email address</mat-error></li>
                } } @if(loginForm.get('password')?.hasError('required') ){
                <li><mat-error>Please enter your password</mat-error></li>
                }
              </ul>
            </div>
          </div>
          }
        </div>
        <form (ngSubmit)="onSubmit()" [formGroup]="loginForm" class="space-y-4">
          <div>
            <label class="block text-sm font-medium" for="email">Email</label>
            <div class="relative">
              <input
                [ngClass]="{
                  'outline-[var(--theme-color-2)] border-0 focus:outline outline-[3px]':
                    !isEmailError,
                  'border-1 border-red-600 focus:outline-0 ': isEmailError
                }"
                autocomplete="username"
                type="email"
                id="email"
                formControlName="email"
                class="pl-12 mt-1 block w-full box-border px-3 py-2 rounded-md placeholder-gray-400 sm:text-sm"
              />
              <div
                class="absolute inset-y-0 left-0 flex items-center pl-3 pointer-events-none"
              >
                <mat-icon
                  class="text-[var(--icon-color)]"
                  aria-hidden="false"
                  aria-label=""
                  fontIcon="contact_mail"
                ></mat-icon>
              </div>
            </div>
          </div>
          <div>
            <label class="block text-sm font-medium" for="password"
              >Password</label
            >
            <div class="relative">
              <input
                [ngClass]="{
                  'outline-[var(--theme-color-2)] border-0 focus:outline outline-[3px]':
                    !isPasswordError,
                  'border-1 border-red-600 focus:outline-0 ': isPasswordError
                }"
                autocomplete="current-password"
                type="password"
                id="password"
                formControlName="password"
                class="pl-12 mt-1 block w-full box-border px-3 py-2 rounded-md placeholder-gray-400 sm:text-sm"
              />
              <div
                class="absolute inset-y-0 left-0 flex items-center pl-3 pointer-events-none"
              >
                <mat-icon
                  class="text-[var(--icon-color)]"
                  aria-hidden="false"
                  aria-label=""
                  fontIcon="lock"
                ></mat-icon>
              </div>
            </div>
          </div>
          <div class="flex items-center justify-between">
            <div class="text-sm">
              <a [routerLink]="'/reset-password'" class="font-medium"
                >Forgot your password?
              </a>
            </div>
          </div>
          <button
            type="submit"
            class="w-full flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium focus:outline-none focus:ring-2 hover:cursor-pointer focus:ring-offset-2 focus:ring-indigo-500"
          >
            Sign in
          </button>
          <mat-divider
            role="separator"
            class="mat-divider mat-divider-horizontal"
            aria-orientation="horizontal"
          ></mat-divider>
          <div class="flex items-center justify-between">
            <div class="text-sm">
              <span>Don't have an account? </span>
              <a [routerLink]="'/register'" class="font-medium">Sign up </a>
            </div>
          </div>
          <!-- <button
            type="button"
            (click)="redirectTo('/register')"
            class="w-full flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white focus:outline-none focus:ring-2 hover:cursor-pointer focus:ring-offset-2 focus:ring-indigo-500"
          >
            Create an Account
          </button> -->
        </form>
      </div>
    </div>
  </div>
</div>
