<section class="w-full max-w-[1536px] mx-auto mb-20 pt-[60px]">
  @if((banner$|async); as banner ){

  <div
    class="flex flex-col-reverse sm:flex-row sm:w-[90%] mx-auto sm:mx-auto py-4 sm:space-x-6 bg-[var(--bg-container-color)] sm:bg-transparent"
  >
    <a [routerLink]="buildDetailPath(banner.id)" [title]="banner.title">
      <div
        class="bg-cover bg-no-repeat bg-center items-center overflow-hidden aspect-[50/22] w-full sm:w-[460px]"
        [ngStyle]="{
          'background-image': banner.backdrop_path
            ? 'url(' + TMDB_MULTI_FACE_1X_IMG_URL + banner.backdrop_path + ')'
            : ''
        }"
      ></div
    ></a>

    <div class="text-center pb-4 sm:py-0 underline">
      <a [routerLink]="buildDetailPath(banner.id)" [title]="banner.title">
        <h1>{{ banner.title }}</h1></a
      >
    </div>
  </div>

  }

  <div
    class="w-full sm:w-[90%] mx-auto sm:flex sm:flex-row sm:space-y-0 space-y-4 py-4"
  >
    <div
      class="w-full sm:w-[50%] bg-[var(--bg-container-color)] sm:bg-transparent"
    >
      <div class="px-4 py-6">
        <div
          class="flex justify-between hover:cursor-pointer sm:hover:cursor-default"
          (click)="toggleCast()"
        >
          <h2>TV Cast</h2>
          <div class="sm:hidden">
            <mat-icon
              aria-hidden="false"
              aria-label=""
              [fontIcon]="isHideCastContainer ? 'expand_more' : 'chevron_right'"
            ></mat-icon>
          </div>
        </div>
      </div>

      <div
        class="px-4"
        [ngClass]="{
          'hidden-container': isHideCastContainer
        }"
      >
        <ul class="p-0 m-0 space-y-4">
          @if((castList$|async); as castList ){ @for(cast of castList; track
          cast){ @defer(){
          <li class="list-none w-full">
            <app-cast-crew-credit-card
              [id]="cast.id"
              [name]="cast.name"
              [role]="buildCharacterTV(cast.roles)"
              [profile_path]="cast.profile_path"
            ></app-cast-crew-credit-card>
          </li>
          } }}
        </ul>
      </div>
    </div>

    <div
      class="w-full sm:w-[50%] bg-[var(--bg-container-color)] sm:bg-transparent"
    >
      <div class="px-4 py-6">
        <div
          class="w-full flex justify-between hover:cursor-pointer sm:hover:cursor-default"
          (click)="toggleCrew()"
        >
          <h2>TV Crew</h2>
          <div class="sm:hidden">
            <mat-icon
              aria-hidden="false"
              aria-label=""
              [fontIcon]="isHideCastContainer ? 'expand_more' : 'chevron_right'"
            ></mat-icon>
          </div>
        </div>
      </div>

      <div
        class="px-4 space-y-8"
        [ngClass]="{
          'hidden-container': isHideCrewContainer
        }"
      >
        @if((departments$ | async); as departments){ @for(department of
        departments; track department){ @if(department.value.length >0){
        <div class="space-y-4">
          <h3>{{ department.key }}</h3>
          <ul class="p-0 m-0 space-y-4">
            @for(crew of department.value; track crew){ @defer(){
            <li class="list-none w-full">
              <app-cast-crew-credit-card
                [id]="crew.id"
                [name]="crew.name"
                [role]="buildJobTV(crew.jobs)"
                [profile_path]="crew.profile_path"
              ></app-cast-crew-credit-card>
            </li>
            } }
          </ul>
        </div>
        } } }
      </div>
    </div>
  </div>
</section>
