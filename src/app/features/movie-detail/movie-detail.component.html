<section
  class="w-full w-max-[1920px] m-auto pt-[60px] max-w-screen-3xl mb-20 overflow-hidden"
>
  @if(movieDetail$ | async; as movieDetail){

  <div
    id="header-detail"
    class="flex bg-cover bg-no-repeat bg-center items-center overflow-hidden lg:min-h-[85vh]"
    [ngStyle]="{
      'background-image': movieDetail.backdrop_path
        ? 'url(' + TMDB_MULTI_FACE_2X_IMG_URL + movieDetail.backdrop_path + ')'
        : ''
    }"
  >
    <div
      class="flex flex-row header-gradient h-full w-full p-4 justify-center lg:justify-normal lg:p-8 space-x-8"
      [ngStyle]="{
        'background-image':
          ((pageEventService.windowInnerWidth$ | async) ?? 0) >= 1024
            ? headerMediaGradient
            : '',
        'background-color':
          ((pageEventService.windowInnerWidth$ | async) ?? 0) < 1024
            ? 'var(--bg-header-media-detail-not-lg)'
            : ''
      }"
      [ngClass]="{ 'backdrop-blur-xl': headerMediaGradient === '' }"
    >
      <div class="h-[35vh] lg:h-[85vh] aspect-[2/3] w-xxxsm relative">
        <app-img
          [alt]="movieDetail.title"
          [title]="movieDetail.title"
          [imgSrc]="movieDetail.poster_path"
          [baseUrl]="TMDB_PROFILE_2X_IMG_URL"
          [priority]="true"
          [customClasses]="'border-container-no-color'"
        ></app-img>

        <app-lifecycle-selector
          (lifecycleStatusElementEmitter)="setLifecycleStatusElement($event)"
          [mediaData]="movieDetail"
          [index]="0"
          [mediaType]="'movie'"
        ></app-lifecycle-selector>

        <div class="w-full absolute bottom-0">
          <app-lifecycle-status-label
            [lifecycleEnumSelected]="lifecycleEnumSelected"
            [customClass]="'border-lifecycle-label'"
          ></app-lifecycle-status-label>
        </div>
      </div>
      <!-- Movie detail content -->
      @if(((pageEventService.windowInnerWidth$ | async) ?? 0) >= 1024) {
      <div class="hidden lg:block max-w-[1100px]">
        <app-media-detail-content
          [textColorBlend]="textColorBlend"
          [isDark]="isDark"
          [mediaData]="movieDetail"
          [releaseDate]="movieDetail.release_date"
          [mediaTitle]="movieDetail.title"
          [runtime]="movieDetail.runtime"
        ></app-media-detail-content>
      </div>
      }
    </div>
  </div>
  @if(((pageEventService.windowInnerWidth$ | async) ?? 0) < 1024){
  <div class="block lg:hidden h-full">
    <app-media-detail-content
      [textColorBlend]="textColorBlend"
      [isDark]="isDark"
      [contentMediaGradient]="contentMediaGradient"
      [mediaData]="movieDetail"
      [mediaData]="movieDetail"
      [releaseDate]="movieDetail.release_date"
      [mediaTitle]="movieDetail.title"
      [runtime]="movieDetail.runtime"
    ></app-media-detail-content>
  </div>

  }

  <div class="w-full lg:w-[80%] lg:mx-auto flex flex-col lg:flex-row py-6">
    <div class="w-1/1 lg:w-full lg:mr-4">
      <div class="border-separator pb-8 mb-8">
        <h2 class="pl-4 sm:pl-0 mb-6">Cast</h2>
        <app-cast-crew-list-container
          [isLoading]="(isLoading$ | async) ?? false"
          [castCrewList]="movieDetail.credits.cast"
        ></app-cast-crew-list-container>
      </div>
      <div class="border-separator pb-8 mb-8">
        <h2 class="pl-4 sm:pl-0 mb-6">Crew</h2>
        <app-cast-crew-list-container
          [isLoading]="(isLoading$ | async) ?? false"
          [castCrewList]="movieDetail.credits.crew"
        ></app-cast-crew-list-container>
      </div>
    </div>
  </div>
  @if(findTrailerVideoKey(movieDetail.videos); as videoKey){
  <app-youtube-embeded [videoId]="videoKey"></app-youtube-embeded>
  } }
</section>
